{% extends "bcse_app/base.html" %}
{% load bcse_extras %}

{% block content %}
  {{block.super}}
  <div class="content">
    <h1> Reservation </h1>
    <label><a href="{% url 'bcse:reservations' %}">&lt;&lt;Reservations</a></label>
    <div id="reservation_container">
      <div class="reservation_form">
        <form method="post" enctype="multipart/form-data" id="reservationForm">
          {% csrf_token %}
          {{form.management_form}}

          {% for field in form %}
            <div class="form-group">
              <label for="id_{{field.name}}" class="form-label"> {{field.label}}</label>
              <div>{{field}}</div>
              <div class="error">{{ field.errors }}</div>
            </div>
          {% endfor %}
          <input type="hidden" id="checking_availability" name="checking_availability" value="0"/>
          <button class="btn btn-warning" type="submit" id="check_availability">Check Availibility</button>
          <button class="btn btn-success" type="submit" id="submit">
            {% if form.instance.id %}
              Save Reservation
            {% else %}
              Make Reservation
            {% endif %}
          </button>
        </form>
      </div>
      <div class="availability_calendar">
        {% if availability_calendar %}
          {% for calendar in availability_calendar %}
            {{calendar|safe}}
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>

  <script type="text/javascript">
    $(function (){
      $('button#check_availability').click(function(e){
        //e.preventDefault();
        $('#checking_availability').val("1");
        //$('form#reservationForm').submit();
      });

      $('button#submit').click(function(e){
        //e.preventDefault();
        $('#checking_availability').val("0");
        //$('form#reservationForm').submit();
      });
    });
  </script>
{% endblock %}
